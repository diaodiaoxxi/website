(window.webpackJsonp=window.webpackJsonp||[]).push([[233],{1210:function(t,s,a){"use strict";a.r(s);var n=a(22),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"自定义页签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义页签"}},[t._v("#")]),t._v(" 自定义页签")]),t._v(" "),a("p",[t._v("由于页签标签栏被封装在框架导航组件内，一般在业务系统内接触不到页签相关逻辑，如果你需要在业务系统新增、删除或者激活指定页签或自定义页签，可以参考下面的 "),a("code",[t._v("API")]),t._v("；\n更详细的示例与代码在 "),a("a",{attrs:{href:"https://git01.hundsun.com/HUIOpenSource/hui-pro/tree/master/frame-layout",target:"_blank",rel:"noopener noreferrer"}},[t._v("框架导航示例"),a("OutboundLink")],1),t._v(" 内。")]),t._v(" "),a("h2",{attrs:{id:"api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),a("p",[t._v("其实 "),a("a",{attrs:{href:"./navigator-interface"}},[t._v("MenuInfo")]),t._v(" 内就包含了页签所需要信息，但是自定义页签只需要传入以下页签相关信息; 因为 "),a("code",[t._v("tabInfo.name")]),t._v(" 可能存在重复, 所以使用 "),a("code",[t._v("tabInfo.uuid")]),t._v(" 来确保页签的唯一性，你可以业务上与 MenuInfo 相关数据库中的 uuid，或者使用 hCore.utils.uuid 来生成一个，"),a("a",{attrs:{href:"#%E4%B8%BB%E5%BA%94%E7%94%A8%E5%86%85%E6%B7%BB%E5%8A%A0%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A1%B5%E7%AD%BE"}},[t._v("代码示例")])]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TabInfo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  uuid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 页签唯一序列号")]),t._v("\n  title"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 页签显示名称")]),t._v("\n  closable"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 添加到页签栏时，是否可以被关闭，不配该项默认为可关闭")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ! 下两个字段为了初始化确定 TabInfo 属于哪个系统，不然侧边栏会被清空；")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ! 如果 systemName 可能存在重复，建议使用 systemUuid")]),t._v("\n  systemUuid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n  systemName"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 你也可以添加其它业务上需要的属性")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// other: any;")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"主应用内添加自定义页签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主应用内添加自定义页签"}},[t._v("#")]),t._v(" 主应用内添加自定义页签")]),t._v(" "),a("p",[t._v("在主应用内框架的页签与激活关系其实可以通过 sync 与页面模板双绑，所以你可以操作页面模板内的 activeMenuItem 与 tabList 来添加、删除、激活相关页签。")]),t._v(" "),a("div",{staticClass:"language-vue extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Layout")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("layout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":activeMenuItem.sync")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("activeMenuItem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":tabList.sync")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("tabList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Layout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n// customTab 参考 TabInfo\nconst methods = {\n    // 添加自定义标签页\n    onAddCustomTab(customTab) {\n      // 检查是否已存在页签\n      const isTabExist = this.tabList.find(\n        (item) => item.uuid === customTab.uuid\n      );\n      if (!isTabExist) {\n        this.tabList = this.tabList.concat(customTab);\n      }\n    },\n    // 删除特定的标签页\n    onDelCustomTab(customTab) {\n      this.tabList = this.tabList.filter(\n        (item) => item.uuid !== customTab.uuid\n      );\n    },\n    // 激活自定义标签\n    onActiveCustomTab(customTab) {\n      this.activeMenuItem = customTab;\n      this.$hCore.navigate(customTab.url);\n    },\n}\n\n// 在框架导航模板页 skeleton 内监听 \nthis.$hCore.on('add-custom-tab', this.onAddCustomTab);\nthis.$hCore.on('del-custom-tab', this.onDelCustomTab);\nthis.$hCore.on('active-custom-tab', this.onActiveCustomTab);\n\n// 在主应用页面 customTab 内触发\nconst customTab = {\n    uuid: this.$hCore.utils.uuid(),\n    url: '/customTab',\n    title: '自定义标签',\n    systemUuid: '9e4691b3-0267-4821-8b76-27aab67146bb', // 必须标记所属的系统，不然侧边栏数据找不到所属的系统，会被清空\n    // systemName: '其他示例', // systemUuid,systemName 任意传一个，如果systemName 可能存在重复的话，建议传 systemUuid ,不然将激活同名子系统中的第一个子系统\n};\nthis.$hCore.trigger('add-custom-tab', this.customTab);\nthis.$hCore.trigger('del-custom-tab', this.customTab);\nthis.$hCore.trigger('active-custom-tab', this.customTab);\n")])])]),a("p",[t._v("更详细的代码可参考 "),a("a",{attrs:{href:"https://git01.hundsun.com/HUIOpenSource/hui-pro/tree/master/frame-layout",target:"_blank",rel:"noopener noreferrer"}},[t._v("框架导航示例"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"子应用内添加自定义页签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#子应用内添加自定义页签"}},[t._v("#")]),t._v(" 子应用内添加自定义页签")]),t._v(" "),a("p",[t._v("由于框架导航的页签是放在主应用内的， 主子应用必须通过 "),a("a",{attrs:{href:"/frame/plugins/micro-app"}},[t._v("hui-plugin-micro-app")]),t._v(" 插件注册的全局事件总线 "),a("code",[t._v("frameEmitter")])]),t._v(" "),a("p",[t._v("在 "),a("code",[t._v("hui-plugin-micro-app")]),t._v(" 内添加了页签相关的 "),a("a",{attrs:{href:"/frame/plugins/micro-app"}},[t._v("默认事件类型")]),t._v("，你可以通过默认的事件来处理自定义标签，而默认事件的监听与上面主应用是一致的")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// app")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" triggerFrame "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hui-core"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" customTab "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  uuid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$hCore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("uuid")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/customTab'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  title"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'自定义子系统标签'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  systemName"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'其他示例'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 必须标记所属的系统，不然侧边栏数据找不到所属的系统，会被清空")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("triggerFrame")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"add-custom-tab"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" customTab"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("triggerFrame")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"del-custom-tab"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" customTab"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("triggerFrame")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"active-custom-tab"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" customTab"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);