(window.webpackJsonp=window.webpackJsonp||[]).push([[226],{1195:function(s,t,a){"use strict";a.r(t);var e=a(22),v=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[s._v("#")]),s._v(" 部署")]),s._v(" "),a("p",[s._v("我们推荐"),a("strong",[s._v("前后端分离")]),s._v("的开发实践，利用工具提供的 mock 能力可以轻松地模拟数据接口。")]),s._v(" "),a("p",[a("code",[s._v("dist")]),s._v(" 目录中包含的构建内容是纯静态的页面资源，可以被部署到任何一个静态资源服务器中，但要确保正确的 "),a("RouterLink",{attrs:{to:"/frame/config.html#base"}},[s._v("base")]),s._v(" 路径。")],1),s._v(" "),a("h2",{attrs:{id:"本地部署验证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地部署验证"}},[s._v("#")]),s._v(" 本地部署验证")]),s._v(" "),a("p",[a("code",[s._v("dist")]),s._v(" 目录需要启动一个 HTTP 服务器来访问 (除非你已经将 "),a("code",[s._v("base")]),s._v(" 配置为了一个相对的值)，所以以 "),a("code",[s._v("file://")]),s._v(" 协议直接打开 "),a("code",[s._v("dist/index.html")]),s._v(" 是不会工作的。")]),s._v(" "),a("p",[s._v("工具集成了一个 Node.js 静态资源服务器，执行 "),a("code",[s._v("serve")]),s._v(" 命令可以快速启动，并对指定的目录提供静态资源服务。具体如下：")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ hui serve -h\nhui serve "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n使用内置服务器为指定目录提供静态资源服务\n\n选项：\n  --help, -h  显示帮助信息  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("布尔"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  --base      指定静态资源服务的虚拟路径  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("字符串"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("默认值: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  --log       开启访问日志  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("布尔"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("默认值: false"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  --port, -p  指定服务器端口  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("字符串"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("默认值: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"9000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),a("p",[s._v("执行 serve 命令必须指定目录 dir，如果指定的目录不存在时将会报错")])]),s._v(" "),a("h3",{attrs:{id:"选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[s._v("#")]),s._v(" 选项")]),s._v(" "),a("h4",{attrs:{id:"base"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#base"}},[s._v("#")]),s._v(" --base")]),s._v(" "),a("p",[s._v("为静态资源服务指定一个基础路径。具体如下：")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ hui serve ./dist --base /foo/\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),a("p",[s._v("特别地，如果在 "),a("code",[s._v("hui.config.js")]),s._v(" 中指定了 "),a("code",[s._v("base")]),s._v(" 参数，在执行 "),a("code",[s._v("serve")]),s._v(" 命令部署静态资源服务时，必须指定该选项。")])]),s._v(" "),a("h4",{attrs:{id:"log"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#log"}},[s._v("#")]),s._v(" --log")]),s._v(" "),a("p",[s._v("开启访问日志，具体如下：")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ hui serve ./dist --log\n")])])]),a("h4",{attrs:{id:"port-p"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#port-p"}},[s._v("#")]),s._v(" --port, -p")]),s._v(" "),a("p",[s._v("指定服务器端口，默认是 "),a("code",[s._v("9000")]),s._v("，具体如下：")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ hui serve ./dist -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\n")])])]),a("h2",{attrs:{id:"history-路由模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#history-路由模式"}},[s._v("#")]),s._v(" history 路由模式")]),s._v(" "),a("p",[s._v("在 "),a("code",[s._v("hui.config.js")]),s._v(" 中配置 "),a("RouterLink",{attrs:{to:"/frame/config.html#mode"}},[s._v("mode")]),s._v(" 为 "),a("code",[s._v("history")]),s._v(" 时，"),a("code",[s._v("dist")]),s._v(" 目录是无法搭配简单的静态资源服务器进行部署的。例如，如果在 "),a("code",[s._v("views")]),s._v(" 目录下存在一张 "),a("code",[s._v("todos/business.vue")]),s._v(" 视图页面，开发服务器已经配置了相应的 "),a("code",[s._v("localhost:8000/todos/business")]),s._v(" 响应，但是一个为生产环境构建架设的简单的静态服务器会却会返回 404。")],1),s._v(" "),a("p",[s._v("为了解决这个问题，你需要配置生产环境服务器，将任何没有匹配到静态文件的请求回退到 "),a("code",[s._v("index.html")]),s._v("。以 nginx 为例：")]),s._v(" "),a("div",{staticClass:"language-lua extra-class"},[a("pre",{pre:!0,attrs:{class:"language-lua"}},[a("code",[s._v("location "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  try_files $uri $uri"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("以上示例假设你在根目录服务这个应用。如果想部署到一个子目录，你需要配置 "),a("code",[s._v("hui.config.js")]),s._v(" 中的 "),a("code",[s._v("base")]),s._v(" 路径。你还需要把上述示例中的根目录调整成为子目录 (即用 "),a("code",[s._v("/name-of-your-subfolder/index.html")]),s._v(" 替换掉 "),a("code",[s._v("/index.html")]),s._v(")。")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("可能你已经注意到了，工具集成的静态资源服务已经做了这样的处理。")])]),s._v(" "),a("h2",{attrs:{id:"cors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cors"}},[s._v("#")]),s._v(" CORS")]),s._v(" "),a("p",[s._v("如果前端静态内容是部署在与后端 API 不同的域名上，你需要适当地配置 "),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS",target:"_blank",rel:"noopener noreferrer"}},[s._v("CORS"),a("OutboundLink")],1),s._v("。")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("基于 HUI CLI 提供的静态资源服务已经做了 CORS 的处理。")])]),s._v(" "),a("h2",{attrs:{id:"基于-see-平台的系统部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基于-see-平台的系统部署"}},[s._v("#")]),s._v(" 基于 SEE 平台的系统部署")]),s._v(" "),a("p",[s._v("TODO")])])}),[],!1,null,null,null);t.default=v.exports}}]);