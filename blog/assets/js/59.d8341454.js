(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{601:function(t,a,s){"use strict";s.r(a);var n=s(22),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"网站安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网站安全"}},[t._v("#")]),t._v(" 网站安全")]),t._v(" "),s("h2",{attrs:{id:"xss-跨站攻击"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#xss-跨站攻击"}},[t._v("#")]),t._v(" XSS(跨站攻击)")]),t._v(" "),s("p",[t._v("黑客向html页面或者DOM节点注入一段JavaScript恶意脚本，从而用户在浏览页面时，利用恶意脚本对用户产生攻击的一种手段")]),t._v(" "),s("h3",{attrs:{id:"表现形式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#表现形式"}},[t._v("#")]),t._v(" 表现形式")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("窃取用户 cookie 信息")]),t._v("。通过 document.cookie 获取网站的 cookie 信息，并通过XMLHttpRequest或者fetch通过CORS将获取到的数据发送到恶意服务器。恶意服务器获取到 cookie 信息时，就可以模拟用户的登录行为")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("监听用户行为")]),t._v("。恶意脚本可以通过 addEventListener 监听用户键盘输入的行为，这样可以轻松获取用户的一些个人信息，信用卡，身份证信息（比较私密的信息）等，将其发送到 恶意服务器。这样黑客拿到这些信息，就可以做些违法的事情")])]),t._v(" "),s("li",[s("p",[t._v("通过"),s("code",[t._v("修改 DOM 来轻松的伪造登录页面")]),t._v("，欺骗用户输入用户名、密码等")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("页面内生成的悬浮广告")]),t._v("，严重影响用户体验")])])]),t._v(" "),s("h3",{attrs:{id:"方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方式"}},[t._v("#")]),t._v(" 方式")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("存储型 XSS")]),t._v(" "),s("ul",[s("li",[t._v("黑客利用服务器端的漏洞，向页面注入恶意脚本，并存储在服务器")]),t._v(" "),s("li",[t._v("当用户访问含有恶意脚本的页面时，就会对用户产生攻击，比如恶意脚本就会将该用户的一些 cookie等信息发送给服务器")])])]),t._v(" "),s("li",[s("p",[t._v("反射型 XSS")]),t._v(" "),s("ul",[s("li",[t._v("用户将一段带有恶意请求提交给服务器，服务器接收到请求后，将恶意脚本返回给浏览器端")]),t._v(" "),s("li",[t._v("Web 服务器不会存储反射型 XSS 攻击的恶意脚本，这是和存储型 XSS 攻击不同的地方")]),t._v(" "),s("li",[t._v("表现：黑客经常会通过 QQ 群或者邮件等渠道诱导用户去点击这些恶意链接")])])]),t._v(" "),s("li",[s("p",[t._v("基于 DOM 的 XSS")]),t._v(" "),s("ul",[s("li",[t._v("基于 dom 的xss 不经过web服务器")]),t._v(" "),s("li",[t._v("就是黑客将恶意脚本通过 "),s("code",[t._v("网络劫持")]),t._v(" 的方式在页面传输的过程中修改html的代码")]),t._v(" "),s("li",[t._v("劫持方式：wifi路由器劫持、本地恶意软件劫持等，共同点： "),s("code",[t._v("Web 资源传输过程")]),t._v("或者在"),s("code",[t._v("用户使用页面的过程中")]),t._v("修改 Web 页面的数据")])])])]),t._v(" "),s("h3",{attrs:{id:"网络劫持"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网络劫持"}},[t._v("#")]),t._v(" 网络劫持")]),t._v(" "),s("ul",[s("li",[t._v("DNS劫持\n"),s("ul",[s("li",[t._v("DNS 强制解析：通过修改运营商的本地 DNS 记录，来引导用户流量到缓存服务器")]),t._v(" "),s("li",[t._v("302 跳转的方式：通过监控网络出口的流量，分析判断哪些内容可以进行劫持处理，再对劫持的内存发起 302 跳转的回复，引导用户获取内容。")])])]),t._v(" "),s("li",[t._v("http劫持\n"),s("ul",[s("li",[t._v("由于 HTTP 明文传输，运营商可能会修改 HTTP 响应内容。如注入广告")])])])]),t._v(" "),s("h3",{attrs:{id:"如何阻止-xss-攻击"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何阻止-xss-攻击"}},[t._v("#")]),t._v(" 如何阻止 XSS 攻击")]),t._v(" "),s("p",[t._v("存储型、反射型 XSS都是需要经过 Web 服务器来处理的，因此可以认为这两种类型的漏洞是"),s("code",[t._v("服务端的安全漏洞")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("服务器输入的脚本进行 过滤 和 转码")])]),t._v(" "),s("li",[s("p",[t._v("充分利用CSP（内容安全策略）")]),t._v(" "),s("ul",[s("li",[t._v("限制加载其他域下的资源")]),t._v(" "),s("li",[t._v("禁止向第三方域提交数据，防止数据泄露")]),t._v(" "),s("li",[t._v("禁止执行一些内联脚本，未授权的脚本")]),t._v(" "),s("li",[t._v("提供上报机制，可以帮助我们尽快发现有哪些 XSS 攻击，以便尽快修复问题")])])]),t._v(" "),s("li",[s("p",[t._v("使用 httpOnly 属性")]),t._v(" "),s("ul",[s("li",[t._v("将cookie 设置为 HttpOnly，意思就是 当前设置 HttpOnly的cookie字段只有在http请求的时候才能读取，所以无法通过 JavaScript脚本获取cookie信息")])])]),t._v(" "),s("li",[s("p",[t._v("输入内容长度控制")]),t._v(" "),s("ul",[s("li",[t._v("对于不受信任的输入，都应该限定一个合理的长度。虽然无法完全防止 XSS 发生，但可以增加 XSS 攻击的难度")])])]),t._v(" "),s("li",[s("p",[t._v("验证码")]),t._v(" "),s("ul",[s("li",[t._v("防止脚本冒充用户提交危险操作")])])]),t._v(" "),s("li",[s("p",[t._v("预防 DOM 型 XSS 攻击：")]),t._v(" "),s("ul",[s("li",[t._v("在使用 .innerHTML、.outerHTML、document.write() 时要特别小心，不要把不可信的数据插入到 HTML 页面上，应尽量使用 .textContent、.setAttribute 等。")]),t._v(" "),s("li",[t._v("如果使用 React/Vue 技术栈，并且不使用 dangerouslySetInnerHTML/v-html 功能，就在前端 render 阶段避免 innerHTML、outerHTML 的 XSS 隐患。")]),t._v(" "),s("li",[t._v("DOM 中的内联事件监听器，如 location、onclick、onerror、onload、onmouseover 等，"),s("code",[t._v("<a>")]),t._v(" 标签的 "),s("code",[t._v("<href>")]),t._v(" 属性，JavaScript 中的 eval()、setTimeout()、setInterval() 等，都能把字符串作为代码运行。如果不可信的数据拼接到字符串中传递给这些 API，很容易产生安全隐患，请务必避免。")])])])]),t._v(" "),s("h3",{attrs:{id:"你认为前端开发者对-xss-攻击应该负多大责任？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#你认为前端开发者对-xss-攻击应该负多大责任？"}},[t._v("#")]),t._v(" 你认为前端开发者对 XSS 攻击应该负多大责任？")]),t._v(" "),s("ul",[s("li",[t._v("首先，用户在向 web服务器 请求html页面时，返回的页面已经注入恶意代码，这个其实最好是在服务器根据在根节点出 杜绝掉 注入恶意代码 的问题，而前端能做的也就是在请求接受到 已经含有恶意代码的页面时，如何将 XSS 对用户的攻击 降到最低。")]),t._v(" "),s("li",[t._v("用户在使用 CSP内容安全策略时，也是需要前后端配合的")])]),t._v(" "),s("h2",{attrs:{id:"csrf攻击-跨站请求伪造"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#csrf攻击-跨站请求伪造"}},[t._v("#")]),t._v(" CSRF攻击 跨站请求伪造")]),t._v(" "),s("p",[t._v("黑客引诱用户打开黑客网站，在黑客网站中，利用用户的登录信息的状态发起跨站请求")]),t._v(" "),s("p",[t._v("简单来讲，"),s("code",[t._v("CSRF 攻击就是黑客利用了用户的登录状态，并通过第三方的站点发起跨站请求，从而来达到他的一些不好目的")])]),t._v(" "),s("p",[t._v("通常调用一些用户登录状态下，一些比较敏感的接口，比如转账、获取个人信息等")]),t._v(" "),s("p",[t._v("通常表现为：")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token doctype"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<!")]),s("span",{pre:!0,attrs:{class:"token doctype-tag"}},[t._v("DOCTYPE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token name"}},[t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("黑客的站点：CSRF攻击演示"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 1. 自动发起 Get 请求 --\x3e")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- https://time.geekbang.org/sendcoin为api请求接口，user,number为参数 --\x3e")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://time.geekbang.org/sendcoin?user=hacker&number=100"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 2. 自动发起 POST 请求  自动提交 --\x3e")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("form")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("hacker-form"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("action")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://time.geekbang.org/sendcoin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("POST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("hidden"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("hacker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("hidden"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("100"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("form")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hacker-form'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("submit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" ")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 3. 引诱用户点击链接 --\x3e")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("width")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("150")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("http://images.xuejuzi.cn/1612/1_161230185104_1.jpg")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("img")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://time.geekbang.org/sendcoin?user=hacker&number=100"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("taget")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("_blank"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        点击下载美女照片\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n")])])]),s("h3",{attrs:{id:"攻击方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#攻击方式"}},[t._v("#")]),t._v(" 攻击方式")]),t._v(" "),s("ul",[s("li",[t._v("自动发起 Get 请求")]),t._v(" "),s("li",[t._v("自动发起 POST 请求")]),t._v(" "),s("li",[t._v("引诱用户点击链接")])]),t._v(" "),s("p",[s("code",[t._v("和 XSS 不同的是，CSRF 攻击不需要将恶意代码注入用户的页面，仅仅是利用服务器的漏洞和用户的登录状态来实施攻击")])]),t._v(" "),s("h3",{attrs:{id:"如何防止-csrf-攻击"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何防止-csrf-攻击"}},[t._v("#")]),t._v(" 如何防止 CSRF 攻击")]),t._v(" "),s("ul",[s("li",[t._v("CSRF产生的条件\n"),s("ul",[s("li",[t._v("目标站点需要有CSRF漏洞")]),t._v(" "),s("li",[t._v("用户需要登陆过目标站点，并且当前浏览器仍保留目标站点的登录信息")]),t._v(" "),s("li",[t._v("需要打开第三方网站，比如黑客网站")])])])]),t._v(" "),s("h4",{attrs:{id:"方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法"}},[t._v("#")]),t._v(" 方法")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("充分利用好 cookie 的 SameSite 属性")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Strict")]),t._v("（完全禁止第三方cookie）")]),t._v(" "),s("li",[s("code",[t._v("Lax")]),t._v("（从第三方站点的链接打开和从第三方站点提交 Get 方式的表单这两种方式都会携带 Cookie，但如果在第三方站点中使用 Post 方法，或者通过 img、iframe 等标签加载的 URL，这些场景都不会携带 Cookie）")]),t._v(" "),s("li",[s("code",[t._v("None")]),t._v("，在任何情况下都会发送 Cookie 数据")])])]),t._v(" "),s("li",[s("p",[t._v("验证请求的来源站点")]),t._v(" "),s("ul",[s("li",[t._v("在服务器端验证请求来源的站点")]),t._v(" "),s("li",[s("code",[t._v("Referer")]),t._v(" 是 HTTP 请求头中的一个字段，记录了该 HTTP 请求的来源地址，完整的url地址")]),t._v(" "),s("li",[s("code",[t._v("Origin")]),t._v("是 http 请求来源的 域名")]),t._v(" "),s("li",[t._v("Origin  优先级 高于 Referer")])])]),t._v(" "),s("li",[s("p",[t._v("CSRF Token")]),t._v(" "),s("ul",[s("li",[t._v("浏览器向服务器发起请求时，服务器会产生一个 CSRF Token字符串。然后并返回给浏览器端")]),t._v(" "),s("li",[t._v("浏览器在发起一个特定的请求时，需要带上  CSRF Token值，服务器会验证改token是否合法；如果是从第三方站点发出的请求，那么将无法获取到 CSRF Token 的值，所以即使发出了请求，服务器也会因为 CSRF Token 不正确而拒绝请求。")]),t._v(" "),s("li",[t._v("注意："),s("code",[t._v("针对于请求的，比如同一个浏览器打开两个相同页面，那么服务器为这两个页面生成的csrf token都是不同的")])])])])]),t._v(" "),s("h2",{attrs:{id:"iframe的滥用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#iframe的滥用"}},[t._v("#")]),t._v(" IFrame的滥用")]),t._v(" "),s("p",[t._v("iframe中的内容是由第三方来提供的，默认情况下他们不受我们的控制，他们可以在iframe中运行 JavaScirpt脚本、Flash插件、弹出对话框等等，这可能会破坏前端用户体验")]),t._v(" "),s("h2",{attrs:{id:"恶意第三方库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#恶意第三方库"}},[t._v("#")]),t._v(" 恶意第三方库")]),t._v(" "),s("p",[t._v("无论是后端服务器应用还是前端应用开发，绝大多数时候我们都是在借助开发框架和各种类库进行 快速开发,一旦第三方库被植入恶意代码很容易引起安全问题")])])}),[],!1,null,null,null);a.default=e.exports}}]);